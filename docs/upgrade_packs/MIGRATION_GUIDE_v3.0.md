# 🎨 MIGRATION_GUIDE_V3.0.md
## Universal Orchestration → Design-Focused v3.0 Migration Guide

본 문서는 기존 Universal Orchestration v2.x 시스템을
**Design-as-Policy 기반의 v3.0 디자인 특화 자동화 시스템**으로
안전하고 단계적으로 확장하기 위한 마이그레이션 가이드다.

목표:
- 디자인을 “결과물”이 아니라 “정책 + 계약 + 자동 검증 대상”으로 승격
- 미감 붕괴를 구조적으로 불가능하게 만들기
- Web / App / AI 협업 환경에서도 디자인 일관성 유지

------------------------------------------------------------
0) v3.0 개념 요약
------------------------------------------------------------

v2.x:
- 설계 품질(Q&A)
- 실행 통제(Plan / Impact / Snapshot)
- 사고 방지(Policy Engine)

v3.0:
- 디자인을 정책으로 선언
- 토큰을 단일 진실원으로 강제
- 디자인 품질을 자동 감사/점수화

한 줄 정의:
v3.0은 “디자인을 시스템 자산으로 고정하는 자동화 레이어”다.

------------------------------------------------------------
1) v2.3 → v3.0 Migration 개요
------------------------------------------------------------

v3.0은 기존 v2.3 구조를 깨지 않는다.
아래 4가지를 “추가”하는 확장이다.

추가되는 핵심 축:
1. DESIGN_SYSTEM (디자인 헌법)
2. DESIGN_POLICY (디자인 금지/강제 규칙)
3. DESIGN_TOKENS (단일 진실원)
4. DESIGN_AUDIT (자동 감사 + 점수)

------------------------------------------------------------
2) Phase 3.0-A : Design Foundation 구축
------------------------------------------------------------

### 2.1 새로 생성해야 할 문서 (필수)

PROJECT_ROOT에 아래 파일을 추가한다.

- DESIGN_SYSTEM.md
- DESIGN_TOKENS.json
- DESIGN_DECISIONS.md

설명:
- DESIGN_SYSTEM.md: 디자인 철학/모드/접근성 선언
- DESIGN_TOKENS.json: 색상/타이포/간격/라운드/모션의 단일 진실원
- DESIGN_DECISIONS.md: “왜 이 디자인을 선택했는가”에 대한 기록

이 단계에서는 자동화가 없어도 된다.
문서 합의가 핵심이다.

### 2.2 DESIGN_SYSTEM.md 최소 요구사항

반드시 포함해야 하는 항목:
- DESIGN_MODE (예: B2B_DENSE, B2B_MINIMAL 등)
- DESIGN_TONE
- PRIMARY_CONTEXT
- ACCESSIBILITY_LEVEL

이 값들은 이후 모든 디자인 정책과 감사의 기준이 된다.

------------------------------------------------------------
3) Phase 3.0-B : Design Policy Engine 도입
------------------------------------------------------------

### 3.1 POLICY_RULES.md 확장

기존 v2.3의 POLICY_RULES.md에
**디자인 전용 정책 섹션**을 추가한다.

초기 MVP에서 반드시 포함할 규칙:
- 토큰 우회 사용 금지 (CRITICAL)
- 디자인 모드 불일치 금지 (MAJOR)
- 접근성 최소 기준 미충족 금지 (CRITICAL)
- 승인되지 않은 애니메이션 금지 (MINOR)

중요 원칙:
- Policy는 “허용/금지”만 결정
- 미적 대안 제시는 하지 않는다

### 3.2 Design Policy의 위치

Design Policy는:
- 실행 전(run_policy_checks.ts 이전)
- 코드 생성/수정 후
에 반드시 평가된다.

------------------------------------------------------------
4) Phase 3.0-C : Design Automation Scripts 연결
------------------------------------------------------------

### 4.1 신규 스크립트 추가

다음 스크립트를 orchestrator/scripts에 추가한다.

- design_policy_check.ts

이 스크립트의 역할:
- DESIGN_SYSTEM.md + POLICY_RULES.md + DESIGN_TOKENS.json을 읽는다
- 코드베이스를 스캔한다
- 디자인 정책 위반을 탐지한다
- 점수와 함께 리포트를 생성한다

### 4.2 Soft Mode → Hard Mode 권장 전략

초기(Soft Mode):
- 위반 발견 시 FAIL 기록
- 실행은 차단하지 않음
- 팀 적응 기간 제공

안정화 후(Hard Mode):
- CRITICAL 위반 발생 시 Execute 즉시 차단
- Snapshot이 있으면 자동 롤백

------------------------------------------------------------
5) Phase 3.0-D : Design Audit & Scoring 활성화
------------------------------------------------------------

### 5.1 DESIGN_AUDIT.md 자동 생성

design_policy_check.ts는 다음을 생성한다.
- DESIGN_AUDIT.md
- design_policy_report.json

DESIGN_AUDIT.md는 반드시 포함해야 한다:
- 총점(100점 기준)
- PASS / WARNING / FAIL 판정
- 위반 Policy ID
- 증거 파일/라인 요약

### 5.2 점수 기준 (권장)

- 90~100: EXCELLENT
- 75~89: GOOD
- 60~74: WARNING
- <60: FAIL

CRITICAL 위반이 하나라도 있으면 FAIL 처리 가능.

------------------------------------------------------------
6) Orchestrator / Auditor 연동 변경
------------------------------------------------------------

### 6.1 orchestrator 변경 사항

orchestrator는 다음을 강제해야 한다.
- design_policy_report.status == FAIL 이면 Execute 금지
- DESIGN_SYSTEM / TOKENS 누락 시 Phase 진행 금지

### 6.2 auditor 확장 사항

auditor는 다음을 검사한다.
- 디자인 결정이 DESIGN_DECISIONS.md에 기록되어 있는가
- 디자인 정책 위반이 무시되거나 우회되지 않았는가
- 점수 급락이 있는 경우 원인이 기록되어 있는가

------------------------------------------------------------
7) v3.0 완료 기준 (Definition of Done)
------------------------------------------------------------

다음 조건을 모두 만족하면 v3.0 전환 완료다.

- 디자인 모드/정책이 문서로 선언되어 있다
- 모든 시각적 값이 토큰을 통해서만 사용된다
- 디자인 정책 위반이 자동으로 탐지된다
- 디자인 품질이 점수로 측정된다
- CRITICAL 위반은 실행 전에 차단된다
- 디자인 수정이 국소적이며 전체 미감을 깨지 않는다

------------------------------------------------------------
8) 운영 팁 (실전)
------------------------------------------------------------

- 처음부터 디자인을 “완벽하게” 만들려 하지 말 것
- 정책은 적게, 강하게 시작할 것
- 토큰 우회 금지는 가장 먼저 적용할 것
- 디자이너/프론트엔드/AI가 같은 문서를 보게 할 것

------------------------------------------------------------
FINAL STATEMENT
------------------------------------------------------------

v3.0은 디자인을 “잘 만들기 위한 시스템”이 아니라  
“**절대 망가지지 않게 만드는 시스템**”이다.

END OF MIGRATION_GUIDE_V3.0.md
